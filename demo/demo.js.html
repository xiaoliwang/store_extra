<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>demon of stroe_extra</title>
    <script src="../lib/store_extra.js"></script>

    <style type="text/css">
        body{
            margin: 50px;
            font-family: helvetica;
            color: #333;
        }
        .input{
            margin: 10px;
        }
        .button{
            margin-right : 5px;
        }
    </style>
</head>
<body>
<p>
    这个页面，你可以看到store_extra最简单的用法。
</p>
key:<input class="input" id="key" /><br/>
value:<input class="input" id="val" /><br/>
<input class="button" type="button" onclick="test1()" value = 'enter'/>
<input class="button" type="button" onclick="test2()" value = 'clear'/>
</body>
<p>所有本地元素都在下面：</p>
<div id="datas"></div>
<script type="application/javascript">
(function(){
    var win = window;
    var test1 = function(){
        var key = document.getElementById('key').value.trim();
        var value = document.getElementById('val').value.trim();
        if(key && value){
            store.set(key,value);
            document.getElementById('key').value = '';
            document.getElementById('val').value = '';
            alert('输入成功，刷新或重开页面可见');
        }else{
            alert('数据不正确');
        }
    }

    var test2 = function(){
        var num = store.clear();
        alert('清除成功,一共' + num + '个key');
    }

    var datas = document.getElementById('datas');
    var allDatas = store.getAll();
    for(var key in allDatas){
        var newNode = document.createElement("div");
        newNode.innerHTML = key + ":" + allDatas[key];
        datas.appendChild(newNode);
    }

    win.test1 = test1;
    win.test2 = test2;
}());
</script>
</html>